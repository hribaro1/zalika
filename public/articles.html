<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Artikli</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <nav class="main-nav">
    <a href="/">Naročila</a> |
    <a href="/completed">Končano</a> |
    <a href="/archive">Oddano</a> |
    <a href="/articles">Artikli</a> |
    <a href="/customers">Stranke</a>
  </nav>

  <h1>Artikli</h1>

  <div id="articleForm">
    <input id="a-name" placeholder="Naziv" />
    <input id="a-unit" placeholder="Enota mere (npr. kos, kg)" />
    <input id="a-price" placeholder="Cena (neto)" type="number" step="0.01" />
    <input id="a-vat" placeholder="DDV % (npr. 22)" type="number" step="0.01" />
    <div>Končna cena: <span id="a-final">0.00 €</span></div>
    <button id="addArticleBtn" class="small-btn">Dodaj artikel</button>
  </div>

  <h2>Seznam artiklov</h2>
  <input id="articleSearch" placeholder="Išči artikle..." />
  <div id="articlesList">Nalaganje...</div>

  <!-- Edit modal (reused pattern) -->
  <div id="articleEditModal" class="modal" aria-hidden="true" style="display:none">
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="articleEditTitle">
      <div class="modal-header">
        <h3 id="articleEditTitle">Uredi artikel</h3>
      </div>
      <div class="modal-body">
        <input id="edit-a-name" placeholder="Naziv" />
        <input id="edit-a-unit" placeholder="Enota mere" />
        <input id="edit-a-price" placeholder="Cena (neto)" type="number" step="0.01" />
        <input id="edit-a-vat" placeholder="DDV %" type="number" step="0.01" />
        <div>Končna cena: <span id="edit-a-final">0.00 €</span></div>
      </div>
      <div class="modal-actions">
        <button id="edit-a-cancel" class="small-btn">Prekliči</button>
        <button id="edit-a-save" class="small-btn">Shrani</button>
        <button id="edit-a-delete" class="small-btn">Izbriši</button>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="articles.js"></script>
  <script>
    document.getElementById('logoutBtn').addEventListener('click', async () => {
      if (confirm('Ali se želite odjaviti?')) {
        await fetch('/api/logout', { method: 'POST' });
        window.location.href = '/login';
      }
    });
  </script>
</body>
</html>